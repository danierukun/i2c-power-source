EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:PIC16F1823
LIBS:powerchannel-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 2
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L PIC16F1823 U?
U 1 1 55B1BE0D
P 3500 1650
F 0 "U?" H 3500 1450 50  0000 C CNN
F 1 "PIC16F1823" H 3500 2050 50  0000 C CNN
F 2 "MODULE" H 3500 1300 50  0001 C CNN
F 3 "DOCUMENTATION" H 3500 1200 50  0001 C CNN
	1    3500 1650
	1    0    0    -1  
$EndComp
NoConn ~ 4250 1650
$Comp
L VDD #PWR?
U 1 1 55B1BEE6
P 2600 1350
F 0 "#PWR?" H 2600 1200 50  0001 C CNN
F 1 "VDD" H 2600 1500 50  0000 C CNN
F 2 "" H 2600 1350 60  0000 C CNN
F 3 "" H 2600 1350 60  0000 C CNN
	1    2600 1350
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 55B1BEFC
P 4400 1150
F 0 "#PWR?" H 4400 900 50  0001 C CNN
F 1 "GND" H 4400 1000 50  0000 C CNN
F 2 "" H 4400 1150 60  0000 C CNN
F 3 "" H 4400 1150 60  0000 C CNN
	1    4400 1150
	1    0    0    -1  
$EndComp
Wire Wire Line
	2600 1350 2750 1350
Text Label 2400 1550 2    60   ~ 0
ADC_VOLTAGE
Text Label 1550 1550 2    60   ~ 0
CPU_RESET
Text Label 2400 1750 2    60   ~ 0
DAC_PWM
Text Label 2400 1950 2    60   ~ 0
ADC_CURRENT
Text Label 4600 1850 0    60   ~ 0
I2C_SDA
Text Label 4600 1750 0    60   ~ 0
I2C_SCL
Text Label 4600 1450 0    60   ~ 0
DAC_ANALOG_PART
Text Label 4600 1550 0    60   ~ 0
DAC_VREF
Wire Wire Line
	4250 1350 4300 1350
Wire Wire Line
	4300 1350 4300 1150
Wire Wire Line
	4300 1150 4400 1150
Wire Wire Line
	4250 1450 4450 1450
Wire Wire Line
	4450 1450 4600 1450
Wire Wire Line
	4250 1750 4600 1750
Wire Wire Line
	4600 1850 4250 1850
Wire Wire Line
	2400 1950 2750 1950
Wire Wire Line
	2400 1750 2750 1750
Wire Wire Line
	2400 1550 2750 1550
Text Label 4600 1350 0    60   ~ 0
ICSP_DATA
Text Label 4600 1650 0    60   ~ 0
ICSP_CLK
Wire Wire Line
	4600 1350 4450 1350
Wire Wire Line
	4450 1350 4450 1450
Connection ~ 4450 1450
Wire Wire Line
	4250 1550 4450 1550
Wire Wire Line
	4450 1550 4600 1550
Wire Wire Line
	4600 1650 4450 1650
Wire Wire Line
	4450 1650 4450 1550
Connection ~ 4450 1550
$Comp
L R R?
U 1 1 55B1C1C8
P 8950 1150
F 0 "R?" V 9030 1150 50  0000 C CNN
F 1 "R" V 8950 1150 50  0000 C CNN
F 2 "" V 8880 1150 30  0000 C CNN
F 3 "" H 8950 1150 30  0000 C CNN
	1    8950 1150
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 55B1C1FB
P 8050 1800
F 0 "R?" V 8130 1800 50  0000 C CNN
F 1 "R" V 8050 1800 50  0000 C CNN
F 2 "" V 7980 1800 30  0000 C CNN
F 3 "" H 8050 1800 30  0000 C CNN
	1    8050 1800
	0    1    1    0   
$EndComp
$Comp
L C C?
U 1 1 55B1C244
P 9650 1850
F 0 "C?" H 9675 1950 50  0000 L CNN
F 1 "C" H 9675 1750 50  0000 L CNN
F 2 "" H 9688 1700 30  0000 C CNN
F 3 "" H 9650 1850 60  0000 C CNN
	1    9650 1850
	1    0    0    -1  
$EndComp
$Comp
L Q_NPN_BCE Q?
U 1 1 55B1C28F
P 8850 1800
F 0 "Q?" H 9150 1850 50  0000 R CNN
F 1 "Q_NPN_BCE" H 9450 1750 50  0000 R CNN
F 2 "" H 9050 1900 29  0000 C CNN
F 3 "" H 8850 1800 60  0000 C CNN
	1    8850 1800
	1    0    0    -1  
$EndComp
$Comp
L D D?
U 1 1 55B1C2E6
P 10000 1450
F 0 "D?" H 10000 1550 50  0000 C CNN
F 1 "D" H 10000 1350 50  0000 C CNN
F 2 "" H 10000 1450 60  0000 C CNN
F 3 "" H 10000 1450 60  0000 C CNN
	1    10000 1450
	-1   0    0    1   
$EndComp
Wire Wire Line
	8200 1800 8450 1800
Wire Wire Line
	8450 1800 8650 1800
Wire Wire Line
	8950 1300 8950 1450
Wire Wire Line
	8950 1450 8950 1600
Wire Wire Line
	8950 1450 9650 1450
Wire Wire Line
	9650 1450 9850 1450
Connection ~ 8950 1450
Wire Wire Line
	9650 1700 9650 1450
Connection ~ 9650 1450
Text Label 1450 1750 2    60   ~ 0
ICSP_VPP
Wire Wire Line
	2750 1650 1550 1650
Wire Wire Line
	1550 1550 1550 1650
Wire Wire Line
	1550 1650 1550 1750
Wire Wire Line
	1550 1750 1450 1750
Connection ~ 1550 1650
$Comp
L GND #PWR?
U 1 1 55B1CCE3
P 8950 2200
F 0 "#PWR?" H 8950 1950 50  0001 C CNN
F 1 "GND" H 8950 2050 50  0000 C CNN
F 2 "" H 8950 2200 60  0000 C CNN
F 3 "" H 8950 2200 60  0000 C CNN
	1    8950 2200
	1    0    0    -1  
$EndComp
Text Label 10400 1450 0    60   ~ 0
CPU_RESET
Wire Wire Line
	10150 1450 10400 1450
Wire Wire Line
	8950 2000 8950 2200
$Comp
L GND #PWR?
U 1 1 55B1D4DB
P 9650 2200
F 0 "#PWR?" H 9650 1950 50  0001 C CNN
F 1 "GND" H 9650 2050 50  0000 C CNN
F 2 "" H 9650 2200 60  0000 C CNN
F 3 "" H 9650 2200 60  0000 C CNN
	1    9650 2200
	1    0    0    -1  
$EndComp
Wire Wire Line
	9650 2000 9650 2200
$Comp
L +5V #PWR?
U 1 1 55B1D52A
P 8950 850
F 0 "#PWR?" H 8950 700 50  0001 C CNN
F 1 "+5V" H 8950 990 50  0000 C CNN
F 2 "" H 8950 850 60  0000 C CNN
F 3 "" H 8950 850 60  0000 C CNN
	1    8950 850 
	1    0    0    -1  
$EndComp
Wire Wire Line
	8950 850  8950 1000
$Comp
L R R?
U 1 1 55B1DCA0
P 8450 2050
F 0 "R?" V 8530 2050 50  0000 C CNN
F 1 "R" V 8450 2050 50  0000 C CNN
F 2 "" V 8380 2050 30  0000 C CNN
F 3 "" H 8450 2050 30  0000 C CNN
	1    8450 2050
	-1   0    0    1   
$EndComp
$Comp
L GND #PWR?
U 1 1 55B1DCE5
P 8450 2200
F 0 "#PWR?" H 8450 1950 50  0001 C CNN
F 1 "GND" H 8450 2050 50  0000 C CNN
F 2 "" H 8450 2200 60  0000 C CNN
F 3 "" H 8450 2200 60  0000 C CNN
	1    8450 2200
	1    0    0    -1  
$EndComp
Wire Wire Line
	8450 1900 8450 1800
Connection ~ 8450 1800
Text Label 7700 1800 2    60   ~ 0
EXT_CPU_RESET
Wire Wire Line
	7700 1800 7900 1800
$Comp
L TL081 U?
U 1 1 55B1F3F1
P 3850 3800
F 0 "U?" H 4150 4000 70  0000 C CNN
F 1 "TL081" H 4150 3900 70  0000 C CNN
F 2 "" H 3850 3800 60  0000 C CNN
F 3 "" H 3850 3800 60  0000 C CNN
	1    3850 3800
	1    0    0    1   
$EndComp
$Comp
L R R?
U 1 1 55B1F4AE
P 2150 4200
F 0 "R?" V 2230 4200 50  0000 C CNN
F 1 "R" V 2150 4200 50  0000 C CNN
F 2 "" V 2080 4200 30  0000 C CNN
F 3 "" H 2150 4200 30  0000 C CNN
	1    2150 4200
	0    1    1    0   
$EndComp
$Comp
L R R?
U 1 1 55B1F4FA
P 2850 4200
F 0 "R?" V 2930 4200 50  0000 C CNN
F 1 "R" V 2850 4200 50  0000 C CNN
F 2 "" V 2780 4200 30  0000 C CNN
F 3 "" H 2850 4200 30  0000 C CNN
	1    2850 4200
	0    1    1    0   
$EndComp
$Comp
L R R?
U 1 1 55B1F542
P 2850 3900
F 0 "R?" V 2930 3900 50  0000 C CNN
F 1 "R" V 2850 3900 50  0000 C CNN
F 2 "" V 2780 3900 30  0000 C CNN
F 3 "" H 2850 3900 30  0000 C CNN
	1    2850 3900
	0    1    1    0   
$EndComp
$Comp
L C C?
U 1 1 55B1F590
P 2500 4500
F 0 "C?" H 2525 4600 50  0000 L CNN
F 1 "C" H 2525 4400 50  0000 L CNN
F 2 "" H 2538 4350 30  0000 C CNN
F 3 "" H 2500 4500 60  0000 C CNN
	1    2500 4500
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR?
U 1 1 55B1F5BD
P 3950 4200
F 0 "#PWR?" H 3950 4050 50  0001 C CNN
F 1 "+5V" H 3950 4340 50  0000 C CNN
F 2 "" H 3950 4200 60  0000 C CNN
F 3 "" H 3950 4200 60  0000 C CNN
	1    3950 4200
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 55B1F5E9
P 3950 3400
F 0 "#PWR?" H 3950 3150 50  0001 C CNN
F 1 "GND" H 3950 3250 50  0000 C CNN
F 2 "" H 3950 3400 60  0000 C CNN
F 3 "" H 3950 3400 60  0000 C CNN
	1    3950 3400
	1    0    0    -1  
$EndComp
Wire Wire Line
	2300 4200 2500 4200
Wire Wire Line
	2500 4200 2700 4200
Wire Wire Line
	2500 4350 2500 4200
Connection ~ 2500 4200
Wire Wire Line
	3350 3250 3350 3700
Wire Wire Line
	3000 3900 3200 3900
Wire Wire Line
	3200 3900 3350 3900
Wire Wire Line
	3000 4200 3200 4200
Wire Wire Line
	3200 4200 3200 3900
Connection ~ 3200 3900
$Comp
L GND #PWR?
U 1 1 55B1FA5B
P 2500 4650
F 0 "#PWR?" H 2500 4400 50  0001 C CNN
F 1 "GND" H 2500 4500 50  0000 C CNN
F 2 "" H 2500 4650 60  0000 C CNN
F 3 "" H 2500 4650 60  0000 C CNN
	1    2500 4650
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 55B208F1
P 3900 3250
F 0 "R?" V 3980 3250 50  0000 C CNN
F 1 "R" V 3900 3250 50  0000 C CNN
F 2 "" V 3830 3250 30  0000 C CNN
F 3 "" H 3900 3250 30  0000 C CNN
	1    3900 3250
	0    1    1    0   
$EndComp
$Comp
L R R?
U 1 1 55B2095B
P 3050 3250
F 0 "R?" V 3130 3250 50  0000 C CNN
F 1 "R" V 3050 3250 50  0000 C CNN
F 2 "" V 2980 3250 30  0000 C CNN
F 3 "" H 3050 3250 30  0000 C CNN
	1    3050 3250
	0    1    1    0   
$EndComp
Wire Wire Line
	3200 3250 3350 3250
Wire Wire Line
	3350 3250 3750 3250
Wire Wire Line
	4050 3250 4350 3250
Wire Wire Line
	4350 3250 4350 3800
Connection ~ 3350 3250
$Comp
L GND #PWR?
U 1 1 55B20ABD
P 2750 3350
F 0 "#PWR?" H 2750 3100 50  0001 C CNN
F 1 "GND" H 2750 3200 50  0000 C CNN
F 2 "" H 2750 3350 60  0000 C CNN
F 3 "" H 2750 3350 60  0000 C CNN
	1    2750 3350
	1    0    0    -1  
$EndComp
Wire Wire Line
	2750 3350 2750 3250
Wire Wire Line
	2750 3250 2900 3250
Text Label 1800 3900 2    60   ~ 0
DAC_ANALOG_PART
Text Label 1800 4200 2    60   ~ 0
DAC_PWM
Wire Wire Line
	1800 3900 2700 3900
Wire Wire Line
	1800 4200 2000 4200
Text Label 4700 3800 0    60   ~ 0
DAC_OUTPUT
Wire Wire Line
	4350 3800 4700 3800
Wire Wire Line
	3750 3400 3950 3400
Wire Wire Line
	3950 4200 3750 4200
$Sheet
S 9400 3100 1000 950 
U 55B2B013
F0 "Power stage" 60
F1 "powerstage.sch" 60
F2 "VOLTAGE_CONTROL" I L 9400 3200 60 
F3 "I_MEASURE" O L 9400 3950 60 
F4 "V_MEASURE" O L 9400 3800 60 
$EndSheet
Text Label 9150 3200 2    60   ~ 0
DAC_OUTPUT
Text Label 9150 3800 2    60   ~ 0
ADC_VOLTAGE
Text Label 9150 3950 2    60   ~ 0
ADC_CURRENT
Wire Wire Line
	9150 3950 9400 3950
Wire Wire Line
	9150 3800 9400 3800
Wire Wire Line
	9150 3200 9400 3200
Text Label 7600 5050 2    60   ~ 0
EXT_CPU_RESET
$Comp
L CONN_01X02 P?
U 1 1 55B3443D
P 7950 5100
F 0 "P?" H 7950 5250 50  0000 C CNN
F 1 "EXT_RST" V 8050 5100 50  0000 C CNN
F 2 "" H 7950 5100 60  0000 C CNN
F 3 "" H 7950 5100 60  0000 C CNN
	1    7950 5100
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 55B34741
P 7600 5150
F 0 "#PWR?" H 7600 4900 50  0001 C CNN
F 1 "GND" H 7600 5000 50  0000 C CNN
F 2 "" H 7600 5150 60  0000 C CNN
F 3 "" H 7600 5150 60  0000 C CNN
	1    7600 5150
	1    0    0    -1  
$EndComp
Wire Wire Line
	7600 5150 7750 5150
Wire Wire Line
	7600 5050 7750 5050
$Comp
L CONN_01X03 P?
U 1 1 55B36516
P 7850 4500
F 0 "P?" H 7850 4700 50  0000 C CNN
F 1 "EXT_12C" V 7950 4500 50  0000 C CNN
F 2 "" H 7850 4500 60  0000 C CNN
F 3 "" H 7850 4500 60  0000 C CNN
	1    7850 4500
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 55B36860
P 7500 4600
F 0 "#PWR?" H 7500 4350 50  0001 C CNN
F 1 "GND" H 7500 4450 50  0000 C CNN
F 2 "" H 7500 4600 60  0000 C CNN
F 3 "" H 7500 4600 60  0000 C CNN
	1    7500 4600
	1    0    0    -1  
$EndComp
Wire Wire Line
	7500 4600 7650 4600
Text Label 7500 4400 2    60   ~ 0
I2C_SDA
Text Label 7500 4500 2    60   ~ 0
I2C_SCL
Wire Wire Line
	7500 4500 7650 4500
Wire Wire Line
	7500 4400 7650 4400
Text Label 2400 1450 2    60   ~ 0
I2C_ADDR_DATA_IN
Wire Wire Line
	4250 1950 4600 1950
Text Label 2400 1850 2    60   ~ 0
I2C_ADDR_CLK
Wire Wire Line
	2400 1450 2750 1450
Wire Wire Line
	2400 1850 2750 1850
Text Label 4600 1950 0    60   ~ 0
I2C_ADDR_LATCH
$Comp
L CONN_01X05 P?
U 1 1 55B3A487
P 7900 5850
F 0 "P?" H 7900 6150 50  0000 C CNN
F 1 "ICSP" V 8000 5850 50  0000 C CNN
F 2 "" H 7900 5850 60  0000 C CNN
F 3 "" H 7900 5850 60  0000 C CNN
	1    7900 5850
	1    0    0    -1  
$EndComp
Text Label 7400 5950 2    60   ~ 0
ICSP_DATA
Text Label 7400 6050 2    60   ~ 0
ICSP_CLK
Text Label 7400 5850 2    60   ~ 0
ICSP_VPP
$Comp
L GND #PWR?
U 1 1 55B3B520
P 6700 5750
F 0 "#PWR?" H 6700 5500 50  0001 C CNN
F 1 "GND" H 6700 5600 50  0000 C CNN
F 2 "" H 6700 5750 60  0000 C CNN
F 3 "" H 6700 5750 60  0000 C CNN
	1    6700 5750
	1    0    0    -1  
$EndComp
$Comp
L VDD #PWR?
U 1 1 55B3C6C2
P 6700 5650
F 0 "#PWR?" H 6700 5500 50  0001 C CNN
F 1 "VDD" H 6700 5800 50  0000 C CNN
F 2 "" H 6700 5650 60  0000 C CNN
F 3 "" H 6700 5650 60  0000 C CNN
	1    6700 5650
	1    0    0    -1  
$EndComp
Wire Wire Line
	6700 5750 7700 5750
Wire Wire Line
	7400 5850 7700 5850
Wire Wire Line
	7400 5950 7700 5950
Wire Wire Line
	7400 6050 7700 6050
$Comp
L D D?
U 1 1 55B3EBD6
P 7250 5650
F 0 "D?" H 7250 5750 50  0000 C CNN
F 1 "D" H 7250 5550 50  0001 C CNN
F 2 "" H 7250 5650 60  0000 C CNN
F 3 "" H 7250 5650 60  0000 C CNN
	1    7250 5650
	1    0    0    -1  
$EndComp
Wire Wire Line
	6700 5650 7100 5650
Wire Wire Line
	7400 5650 7700 5650
$EndSCHEMATC
