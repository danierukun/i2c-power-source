EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:PIC16F1823
LIBS:dips-s
LIBS:powerchannel-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 3
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L PIC16F1823 U?
U 1 1 55B1BE0D
P 3500 1650
F 0 "U?" H 3500 1450 50  0000 C CNN
F 1 "PIC16F1823" H 3500 2050 50  0000 C CNN
F 2 "MODULE" H 3500 1300 50  0001 C CNN
F 3 "DOCUMENTATION" H 3500 1200 50  0001 C CNN
	1    3500 1650
	1    0    0    -1  
$EndComp
NoConn ~ 4250 1650
$Comp
L VDD #PWR?
U 1 1 55B1BEE6
P 2600 1350
F 0 "#PWR?" H 2600 1200 50  0001 C CNN
F 1 "VDD" H 2600 1500 50  0000 C CNN
F 2 "" H 2600 1350 60  0000 C CNN
F 3 "" H 2600 1350 60  0000 C CNN
	1    2600 1350
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 55B1BEFC
P 4400 1150
F 0 "#PWR?" H 4400 900 50  0001 C CNN
F 1 "GND" H 4400 1000 50  0000 C CNN
F 2 "" H 4400 1150 60  0000 C CNN
F 3 "" H 4400 1150 60  0000 C CNN
	1    4400 1150
	1    0    0    -1  
$EndComp
Wire Wire Line
	2600 1350 2750 1350
Text Label 2400 1550 2    60   ~ 0
ADC_VOLTAGE
Text Label 1550 1550 2    60   ~ 0
CPU_RESET
Text Label 2400 1750 2    60   ~ 0
DAC_PWM
Text Label 2400 1950 2    60   ~ 0
ADC_CURRENT
Text Label 4600 1850 0    60   ~ 0
I2C_SDA
Text Label 4600 1750 0    60   ~ 0
I2C_SCL
Text Label 4600 1450 0    60   ~ 0
DAC_ANALOG_PART
Text Label 4600 1550 0    60   ~ 0
DAC_VREF
Wire Wire Line
	4250 1350 4300 1350
Wire Wire Line
	4300 1350 4300 1150
Wire Wire Line
	4300 1150 4400 1150
Wire Wire Line
	4250 1450 4600 1450
Wire Wire Line
	4250 1750 4600 1750
Wire Wire Line
	4600 1850 4250 1850
Wire Wire Line
	2400 1950 2750 1950
Wire Wire Line
	2400 1750 2750 1750
Wire Wire Line
	2400 1550 2750 1550
Text Label 4600 1350 0    60   ~ 0
ICSP_DATA
Text Label 4600 1650 0    60   ~ 0
ICSP_CLK
Wire Wire Line
	4600 1350 4450 1350
Wire Wire Line
	4450 1350 4450 1450
Connection ~ 4450 1450
Wire Wire Line
	4250 1550 4600 1550
Wire Wire Line
	4600 1650 4450 1650
Wire Wire Line
	4450 1650 4450 1550
Connection ~ 4450 1550
$Comp
L R R?
U 1 1 55B1C1C8
P 8950 1150
F 0 "R?" V 9030 1150 50  0000 C CNN
F 1 "R" V 8950 1150 50  0000 C CNN
F 2 "" V 8880 1150 30  0000 C CNN
F 3 "" H 8950 1150 30  0000 C CNN
	1    8950 1150
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 55B1C1FB
P 8050 1800
F 0 "R?" V 8130 1800 50  0000 C CNN
F 1 "R" V 8050 1800 50  0000 C CNN
F 2 "" V 7980 1800 30  0000 C CNN
F 3 "" H 8050 1800 30  0000 C CNN
	1    8050 1800
	0    1    1    0   
$EndComp
$Comp
L C C?
U 1 1 55B1C244
P 9650 1850
F 0 "C?" H 9675 1950 50  0000 L CNN
F 1 "C" H 9675 1750 50  0000 L CNN
F 2 "" H 9688 1700 30  0000 C CNN
F 3 "" H 9650 1850 60  0000 C CNN
	1    9650 1850
	1    0    0    -1  
$EndComp
$Comp
L Q_NPN_BCE Q?
U 1 1 55B1C28F
P 8850 1800
F 0 "Q?" H 9150 1850 50  0000 R CNN
F 1 "Q_NPN_BCE" H 9450 1750 50  0000 R CNN
F 2 "" H 9050 1900 29  0000 C CNN
F 3 "" H 8850 1800 60  0000 C CNN
	1    8850 1800
	1    0    0    -1  
$EndComp
$Comp
L D D?
U 1 1 55B1C2E6
P 10000 1450
F 0 "D?" H 10000 1550 50  0000 C CNN
F 1 "D" H 10000 1350 50  0000 C CNN
F 2 "" H 10000 1450 60  0000 C CNN
F 3 "" H 10000 1450 60  0000 C CNN
	1    10000 1450
	-1   0    0    1   
$EndComp
Wire Wire Line
	8200 1800 8650 1800
Wire Wire Line
	8950 1300 8950 1600
Wire Wire Line
	8950 1450 9850 1450
Connection ~ 8950 1450
Wire Wire Line
	9650 1700 9650 1450
Connection ~ 9650 1450
Text Label 1450 1750 2    60   ~ 0
ICSP_VPP
Wire Wire Line
	2750 1650 1550 1650
Wire Wire Line
	1550 1550 1550 1750
Wire Wire Line
	1550 1750 1450 1750
Connection ~ 1550 1650
$Comp
L GND #PWR?
U 1 1 55B1CCE3
P 8950 2200
F 0 "#PWR?" H 8950 1950 50  0001 C CNN
F 1 "GND" H 8950 2050 50  0000 C CNN
F 2 "" H 8950 2200 60  0000 C CNN
F 3 "" H 8950 2200 60  0000 C CNN
	1    8950 2200
	1    0    0    -1  
$EndComp
Text Label 10400 1450 0    60   ~ 0
CPU_RESET
Wire Wire Line
	10150 1450 10400 1450
Wire Wire Line
	8950 2000 8950 2200
$Comp
L GND #PWR?
U 1 1 55B1D4DB
P 9650 2200
F 0 "#PWR?" H 9650 1950 50  0001 C CNN
F 1 "GND" H 9650 2050 50  0000 C CNN
F 2 "" H 9650 2200 60  0000 C CNN
F 3 "" H 9650 2200 60  0000 C CNN
	1    9650 2200
	1    0    0    -1  
$EndComp
Wire Wire Line
	9650 2000 9650 2200
$Comp
L +5V #PWR?
U 1 1 55B1D52A
P 8950 850
F 0 "#PWR?" H 8950 700 50  0001 C CNN
F 1 "+5V" H 8950 990 50  0000 C CNN
F 2 "" H 8950 850 60  0000 C CNN
F 3 "" H 8950 850 60  0000 C CNN
	1    8950 850 
	1    0    0    -1  
$EndComp
Wire Wire Line
	8950 850  8950 1000
$Comp
L R R?
U 1 1 55B1DCA0
P 8450 2050
F 0 "R?" V 8530 2050 50  0000 C CNN
F 1 "R" V 8450 2050 50  0000 C CNN
F 2 "" V 8380 2050 30  0000 C CNN
F 3 "" H 8450 2050 30  0000 C CNN
	1    8450 2050
	-1   0    0    1   
$EndComp
$Comp
L GND #PWR?
U 1 1 55B1DCE5
P 8450 2200
F 0 "#PWR?" H 8450 1950 50  0001 C CNN
F 1 "GND" H 8450 2050 50  0000 C CNN
F 2 "" H 8450 2200 60  0000 C CNN
F 3 "" H 8450 2200 60  0000 C CNN
	1    8450 2200
	1    0    0    -1  
$EndComp
Wire Wire Line
	8450 1900 8450 1800
Connection ~ 8450 1800
Text Label 7700 1800 2    60   ~ 0
EXT_CPU_RESET
Wire Wire Line
	7700 1800 7900 1800
$Comp
L TL081 U?
U 1 1 55B1F3F1
P 3600 3350
F 0 "U?" H 3900 3550 70  0000 C CNN
F 1 "TL081" H 3900 3450 70  0000 C CNN
F 2 "" H 3600 3350 60  0000 C CNN
F 3 "" H 3600 3350 60  0000 C CNN
	1    3600 3350
	1    0    0    1   
$EndComp
$Comp
L R R?
U 1 1 55B1F4AE
P 1900 3750
F 0 "R?" V 1980 3750 50  0000 C CNN
F 1 "R" V 1900 3750 50  0000 C CNN
F 2 "" V 1830 3750 30  0000 C CNN
F 3 "" H 1900 3750 30  0000 C CNN
	1    1900 3750
	0    1    1    0   
$EndComp
$Comp
L R R?
U 1 1 55B1F4FA
P 2600 3750
F 0 "R?" V 2680 3750 50  0000 C CNN
F 1 "R" V 2600 3750 50  0000 C CNN
F 2 "" V 2530 3750 30  0000 C CNN
F 3 "" H 2600 3750 30  0000 C CNN
	1    2600 3750
	0    1    1    0   
$EndComp
$Comp
L R R?
U 1 1 55B1F542
P 2600 3450
F 0 "R?" V 2680 3450 50  0000 C CNN
F 1 "R" V 2600 3450 50  0000 C CNN
F 2 "" V 2530 3450 30  0000 C CNN
F 3 "" H 2600 3450 30  0000 C CNN
	1    2600 3450
	0    1    1    0   
$EndComp
$Comp
L C C?
U 1 1 55B1F590
P 2250 4050
F 0 "C?" H 2275 4150 50  0000 L CNN
F 1 "C" H 2275 3950 50  0000 L CNN
F 2 "" H 2288 3900 30  0000 C CNN
F 3 "" H 2250 4050 60  0000 C CNN
	1    2250 4050
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR?
U 1 1 55B1F5BD
P 3700 3750
F 0 "#PWR?" H 3700 3600 50  0001 C CNN
F 1 "+5V" H 3700 3890 50  0000 C CNN
F 2 "" H 3700 3750 60  0000 C CNN
F 3 "" H 3700 3750 60  0000 C CNN
	1    3700 3750
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 55B1F5E9
P 3700 2950
F 0 "#PWR?" H 3700 2700 50  0001 C CNN
F 1 "GND" H 3700 2800 50  0000 C CNN
F 2 "" H 3700 2950 60  0000 C CNN
F 3 "" H 3700 2950 60  0000 C CNN
	1    3700 2950
	1    0    0    -1  
$EndComp
Wire Wire Line
	2050 3750 2450 3750
Wire Wire Line
	2250 3900 2250 3750
Connection ~ 2250 3750
Wire Wire Line
	3100 2800 3100 3250
Wire Wire Line
	2750 3450 3100 3450
Wire Wire Line
	2750 3750 2950 3750
Wire Wire Line
	2950 3750 2950 3450
Connection ~ 2950 3450
$Comp
L GND #PWR?
U 1 1 55B1FA5B
P 2250 4200
F 0 "#PWR?" H 2250 3950 50  0001 C CNN
F 1 "GND" H 2250 4050 50  0000 C CNN
F 2 "" H 2250 4200 60  0000 C CNN
F 3 "" H 2250 4200 60  0000 C CNN
	1    2250 4200
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 55B208F1
P 3650 2800
F 0 "R?" V 3730 2800 50  0000 C CNN
F 1 "R" V 3650 2800 50  0000 C CNN
F 2 "" V 3580 2800 30  0000 C CNN
F 3 "" H 3650 2800 30  0000 C CNN
	1    3650 2800
	0    1    1    0   
$EndComp
$Comp
L R R?
U 1 1 55B2095B
P 2800 2800
F 0 "R?" V 2880 2800 50  0000 C CNN
F 1 "R" V 2800 2800 50  0000 C CNN
F 2 "" V 2730 2800 30  0000 C CNN
F 3 "" H 2800 2800 30  0000 C CNN
	1    2800 2800
	0    1    1    0   
$EndComp
Wire Wire Line
	2950 2800 3500 2800
Wire Wire Line
	3800 2800 4100 2800
Wire Wire Line
	4100 2800 4100 3350
Connection ~ 3100 2800
$Comp
L GND #PWR?
U 1 1 55B20ABD
P 2500 2900
F 0 "#PWR?" H 2500 2650 50  0001 C CNN
F 1 "GND" H 2500 2750 50  0000 C CNN
F 2 "" H 2500 2900 60  0000 C CNN
F 3 "" H 2500 2900 60  0000 C CNN
	1    2500 2900
	1    0    0    -1  
$EndComp
Wire Wire Line
	2500 2900 2500 2800
Wire Wire Line
	2500 2800 2650 2800
Text Label 1550 3450 2    60   ~ 0
DAC_ANALOG_PART
Text Label 1550 3750 2    60   ~ 0
DAC_PWM
Wire Wire Line
	1550 3450 2450 3450
Wire Wire Line
	1550 3750 1750 3750
Text Label 4450 3350 0    60   ~ 0
DAC_OUTPUT
Wire Wire Line
	4100 3350 4450 3350
Wire Wire Line
	3500 2950 3700 2950
Wire Wire Line
	3700 3750 3500 3750
$Sheet
S 9400 3100 1000 950 
U 55B2B013
F0 "Power stage" 60
F1 "powerstage.sch" 60
F2 "VOLTAGE_CONTROL" I L 9400 3200 60 
F3 "I_MEASURE" O L 9400 3950 60 
F4 "V_MEASURE" O L 9400 3800 60 
$EndSheet
Text Label 9150 3200 2    60   ~ 0
DAC_OUTPUT
Text Label 9150 3800 2    60   ~ 0
ADC_VOLTAGE
Text Label 9150 3950 2    60   ~ 0
ADC_CURRENT
Wire Wire Line
	9150 3950 9400 3950
Wire Wire Line
	9150 3800 9400 3800
Wire Wire Line
	9150 3200 9400 3200
Text Label 10000 5400 2    60   ~ 0
EXT_CPU_RESET
$Comp
L CONN_01X02 P?
U 1 1 55B3443D
P 10350 5450
F 0 "P?" H 10350 5600 50  0000 C CNN
F 1 "EXT_RST" V 10450 5450 50  0000 C CNN
F 2 "" H 10350 5450 60  0000 C CNN
F 3 "" H 10350 5450 60  0000 C CNN
	1    10350 5450
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 55B34741
P 10000 5500
F 0 "#PWR?" H 10000 5250 50  0001 C CNN
F 1 "GND" H 10000 5350 50  0000 C CNN
F 2 "" H 10000 5500 60  0000 C CNN
F 3 "" H 10000 5500 60  0000 C CNN
	1    10000 5500
	1    0    0    -1  
$EndComp
Wire Wire Line
	10000 5500 10150 5500
Wire Wire Line
	10000 5400 10150 5400
$Comp
L CONN_01X03 P?
U 1 1 55B36516
P 7950 5650
F 0 "P?" H 7950 5850 50  0000 C CNN
F 1 "EXT_12C" V 8050 5650 50  0000 C CNN
F 2 "" H 7950 5650 60  0000 C CNN
F 3 "" H 7950 5650 60  0000 C CNN
	1    7950 5650
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 55B36860
P 6500 5650
F 0 "#PWR?" H 6500 5400 50  0001 C CNN
F 1 "GND" H 6500 5500 50  0000 C CNN
F 2 "" H 6500 5650 60  0000 C CNN
F 3 "" H 6500 5650 60  0000 C CNN
	1    6500 5650
	1    0    0    -1  
$EndComp
Wire Wire Line
	7150 5550 7750 5550
Text Label 2400 1450 2    60   ~ 0
I2C_ADDR_DATA_IN
Wire Wire Line
	4250 1950 4600 1950
Text Label 2400 1850 2    60   ~ 0
I2C_ADDR_CLK
Wire Wire Line
	2400 1450 2750 1450
Wire Wire Line
	2400 1850 2750 1850
Text Label 4600 1950 0    60   ~ 0
I2C_ADDR_LATCH
$Comp
L CONN_01X05 P?
U 1 1 55B3A487
P 10300 6200
F 0 "P?" H 10300 6500 50  0000 C CNN
F 1 "ICSP" V 10400 6200 50  0000 C CNN
F 2 "" H 10300 6200 60  0000 C CNN
F 3 "" H 10300 6200 60  0000 C CNN
	1    10300 6200
	1    0    0    -1  
$EndComp
Text Label 9800 6300 2    60   ~ 0
ICSP_DATA
Text Label 9800 6400 2    60   ~ 0
ICSP_CLK
Text Label 9800 6200 2    60   ~ 0
ICSP_VPP
$Comp
L GND #PWR?
U 1 1 55B3B520
P 9100 6100
F 0 "#PWR?" H 9100 5850 50  0001 C CNN
F 1 "GND" H 9100 5950 50  0000 C CNN
F 2 "" H 9100 6100 60  0000 C CNN
F 3 "" H 9100 6100 60  0000 C CNN
	1    9100 6100
	1    0    0    -1  
$EndComp
$Comp
L VDD #PWR?
U 1 1 55B3C6C2
P 9100 6000
F 0 "#PWR?" H 9100 5850 50  0001 C CNN
F 1 "VDD" H 9100 6150 50  0000 C CNN
F 2 "" H 9100 6000 60  0000 C CNN
F 3 "" H 9100 6000 60  0000 C CNN
	1    9100 6000
	1    0    0    -1  
$EndComp
Wire Wire Line
	9100 6100 10100 6100
Wire Wire Line
	9800 6200 10100 6200
Wire Wire Line
	9800 6300 10100 6300
Wire Wire Line
	9800 6400 10100 6400
$Comp
L D D?
U 1 1 55B3EBD6
P 9650 6000
F 0 "D?" H 9650 6100 50  0000 C CNN
F 1 "D" H 9650 5900 50  0001 C CNN
F 2 "" H 9650 6000 60  0000 C CNN
F 3 "" H 9650 6000 60  0000 C CNN
	1    9650 6000
	1    0    0    -1  
$EndComp
Wire Wire Line
	9100 6000 9500 6000
Wire Wire Line
	9800 6000 10100 6000
$Sheet
S 5450 3900 800  800 
U 55B3B20E
F0 "I2C Address Selection" 60
F1 "i2caddrselect.sch" 60
F2 "ADDR_LATCH" I L 5450 4600 60 
F3 "CLK" I L 5450 4000 60 
F4 "DATA_OUT" O L 5450 4100 60 
$EndSheet
$Comp
L R R?
U 1 1 55B3DF6C
P 7350 5250
F 0 "R?" V 7430 5250 50  0000 C CNN
F 1 "R" V 7350 5250 50  0000 C CNN
F 2 "" V 7280 5250 30  0000 C CNN
F 3 "" H 7350 5250 30  0000 C CNN
	1    7350 5250
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 55B3E004
P 7650 5250
F 0 "R?" V 7730 5250 50  0000 C CNN
F 1 "R" V 7650 5250 50  0000 C CNN
F 2 "" V 7580 5250 30  0000 C CNN
F 3 "" H 7650 5250 30  0000 C CNN
	1    7650 5250
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR?
U 1 1 55B3E416
P 7500 4950
F 0 "#PWR?" H 7500 4800 50  0001 C CNN
F 1 "+5V" H 7500 5090 50  0000 C CNN
F 2 "" H 7500 4950 60  0000 C CNN
F 3 "" H 7500 4950 60  0000 C CNN
	1    7500 4950
	1    0    0    -1  
$EndComp
Wire Wire Line
	7350 5100 7350 5050
Wire Wire Line
	7350 5050 7650 5050
Wire Wire Line
	7500 5050 7500 4950
Wire Wire Line
	7650 5050 7650 5100
Connection ~ 7500 5050
Wire Wire Line
	7350 5400 7350 5550
Connection ~ 7350 5550
Text GLabel 7150 5550 0    60   BiDi ~ 0
I2C_SDA
Text GLabel 7150 5750 0    60   BiDi ~ 0
I2C_SCL
Wire Wire Line
	6500 5650 7750 5650
Wire Wire Line
	7750 5750 7150 5750
Wire Wire Line
	7650 5400 7650 5750
Connection ~ 7650 5750
$Comp
L CONN_01X04 P?
U 1 1 55B434B1
P 3500 5400
F 0 "P?" H 3500 5650 50  0000 C CNN
F 1 "CONN_01X04" V 3600 5400 50  0000 C CNN
F 2 "" H 3500 5400 60  0000 C CNN
F 3 "" H 3500 5400 60  0000 C CNN
	1    3500 5400
	1    0    0    -1  
$EndComp
$Comp
L +24V #PWR?
U 1 1 55B436EF
P 2850 5250
F 0 "#PWR?" H 2850 5100 50  0001 C CNN
F 1 "+24V" H 2850 5390 50  0000 C CNN
F 2 "" H 2850 5250 60  0000 C CNN
F 3 "" H 2850 5250 60  0000 C CNN
	1    2850 5250
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR?
U 1 1 55B43751
P 2650 5350
F 0 "#PWR?" H 2650 5200 50  0001 C CNN
F 1 "+5V" H 2650 5490 50  0000 C CNN
F 2 "" H 2650 5350 60  0000 C CNN
F 3 "" H 2650 5350 60  0000 C CNN
	1    2650 5350
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 55B437B3
P 2650 5450
F 0 "#PWR?" H 2650 5200 50  0001 C CNN
F 1 "GND" H 2650 5300 50  0000 C CNN
F 2 "" H 2650 5450 60  0000 C CNN
F 3 "" H 2650 5450 60  0000 C CNN
	1    2650 5450
	1    0    0    -1  
$EndComp
$Comp
L Earth #PWR?
U 1 1 55B43815
P 2850 5550
F 0 "#PWR?" H 2850 5300 50  0001 C CNN
F 1 "Earth" H 2850 5400 50  0001 C CNN
F 2 "" H 2850 5550 60  0000 C CNN
F 3 "" H 2850 5550 60  0000 C CNN
	1    2850 5550
	1    0    0    -1  
$EndComp
Wire Wire Line
	2650 5450 3300 5450
Wire Wire Line
	2650 5350 3300 5350
Wire Wire Line
	2850 5250 3300 5250
Wire Wire Line
	2850 5550 3300 5550
$Comp
L PWR_FLAG #FLG?
U 1 1 55B44027
P 3000 4750
F 0 "#FLG?" H 3000 4845 50  0001 C CNN
F 1 "PWR_FLAG" H 3000 4930 50  0000 C CNN
F 2 "" H 3000 4750 60  0000 C CNN
F 3 "" H 3000 4750 60  0000 C CNN
	1    3000 4750
	1    0    0    -1  
$EndComp
Wire Wire Line
	3000 4750 3000 5250
Connection ~ 3000 5250
Wire Wire Line
	3000 5100 3200 5100
Wire Wire Line
	3100 5100 3100 5350
Connection ~ 3100 5350
Connection ~ 3000 5100
Wire Wire Line
	3200 5100 3200 5450
Connection ~ 3200 5450
Connection ~ 3100 5100
$EndSCHEMATC
